<!doctype html>
<html class="no-js" lang="zxx">
<head>
<!-- Meta Tags -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="keywords" content="Site keywords here">
<meta name="description" content="">
<meta name='copyright' content=''>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Title -->
<title>Get Started - JOEeXPRESS</title>
<!-- Favicon -->
<link rel="icon" href="img/favicon.png">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- Nice Select CSS -->
<link rel="stylesheet" href="css/nice-select.css">
<!-- Font Awesome CSS -->
<link rel="stylesheet" href="css/font-awesome.min.css">
<!-- icofont CSS -->
<link rel="stylesheet" href="css/icofont.css">
<!-- Slicknav -->
<link rel="stylesheet" href="css/slicknav.min.css">
<!-- Owl Carousel CSS -->
<link rel="stylesheet" href="css/owl-carousel.css">
<!-- Datepicker CSS -->
<link rel="stylesheet" href="css/datepicker.css">
<!-- Animate CSS -->
<link rel="stylesheet" href="css/animate.min.css">
<!-- Magnific Popup CSS -->
<link rel="stylesheet" href="css/magnific-popup.css">

<!--Other CSS -->
<link rel="stylesheet" href="css/normalize.css">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="css/responsive.css">

<!-- Supabase -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
.auth-container {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.1);
    overflow: hidden;
}

.auth-tabs {
    display: flex;
    background: #f8f9fa;
}

.auth-tab {
    flex: 1;
    padding: 15px 20px;
    text-align: center;
    background: none;
    border: none;
    cursor: pointer;
    font-weight: 500;
    color: #666;
    transition: all 0.3s ease;
}

.auth-tab.active {
    background: white;
    color: #1A76F0;
    border-bottom: 2px solid #1A76F0;
}

.auth-form {
    padding: 40px;
    display: none;
}

.auth-form.active {
    display: block;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
    transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #1A76F0;
    box-shadow: 0 0 0 2px rgba(26, 118, 240, 0.1);
}

.btn-auth {
    width: 100%;
    padding: 12px;
    background: #1A76F0;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.btn-auth:hover {
    background: #0d5cb5;
}

.btn-auth:disabled {
    background: #ccc;
    cursor: not-allowed;
}

.error-message {
    background: #fee;
    color: #c33;
    padding: 10px 15px;
    border-radius: 5px;
    margin-bottom: 20px;
    border-left: 4px solid #c33;
}

.success-message {
    background: #efe;
    color: #363;
    padding: 10px 15px;
    border-radius: 5px;
    margin-bottom: 20px;
    border-left: 4px solid #363;
}

/* Enhanced Dashboard Styles */
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.1);
    overflow: hidden;
}

.dashboard-header {
    background: linear-gradient(135deg, #1A76F0 0%, #0d5cb5 100%);
    color: white;
    padding: 30px 40px;
    text-align: center;
}

.dashboard-header h2 {
    margin: 0 0 10px 0;
    font-size: 2.2rem;
    font-weight: 600;
}

.dashboard-header p {
    margin: 0;
    font-size: 1.1rem;
    opacity: 0.9;
}

.dashboard-content {
    padding: 40px;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 30px;
}

.dashboard-card {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 25px;
    border-left: 4px solid #1A76F0;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.dashboard-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.card-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.card-icon {
    width: 40px;
    height: 40px;
    background: #1A76F0;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: white;
    font-size: 18px;
}

.card-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.card-content {
    color: #666;
    line-height: 1.6;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s ease;
}

.stat-card:hover {
    border-color: #1A76F0;
    transform: translateY(-2px);
}

.stat-number {
    font-size: 2rem;
    font-weight: bold;
    color: #1A76F0;
    margin-bottom: 5px;
}

.stat-label {
    color: #666;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 10px;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #1A76F0, #0d5cb5);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    margin-top: 30px;
}

.action-btn {
    background: white;
    border: 2px solid #1A76F0;
    color: #1A76F0;
    padding: 15px 20px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
}

.action-btn:hover {
    background: #1A76F0;
    color: white;
    text-decoration: none;
    transform: translateY(-1px);
}

.user-info {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 30px;
}

.user-avatar {
    width: 80px;
    height: 80px;
    background: #1A76F0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2rem;
    font-weight: bold;
    margin: 0 auto 15px;
}

.logout-btn {
    background: #dc3545;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    margin-top: 20px;
    transition: all 0.3s ease;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.logout-btn:hover {
    background: #c82333;
    transform: translateY(-1px);
}

.activity-item {
    padding: 15px 0;
    border-bottom: 1px solid #e9ecef;
    display: flex;
    align-items: center;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-icon {
    width: 35px;
    height: 35px;
    background: #e9ecef;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: #666;
}

.activity-content {
    flex: 1;
}

.activity-title {
    font-weight: 500;
    color: #333;
    margin-bottom: 3px;
}

.activity-time {
    font-size: 0.85rem;
    color: #999;
}

@media (max-width: 768px) {
    .dashboard-content {
        padding: 20px;
    }
    
    .dashboard-grid,
    .stats-grid,
    .quick-actions {
        grid-template-columns: 1fr;
    }
    
    .dashboard-header {
        padding: 20px;
    }
    
    .dashboard-header h2 {
        font-size: 1.8rem;
    }
}
</style>

</head>
<body>

<!-- Header Area -->
<header class="header" >
<!-- Header Inner -->
<div class="header-inner">
<div class="container">
<div class="inner">
<div class="row">
<div class="col-lg-3 col-md-3 col-12">
<!-- Start Logo -->
<div class="logo">
<a href="index.html"><img src="images/JE Techhub logo.png"></a>
</div>
<!-- End Logo -->
<!-- Mobile Nav -->
<div class="mobile-nav"></div>
<!-- End Mobile Nav -->
</div>
<div class="col-lg-7 col-md-9 col-12">
<!-- Main Menu -->
<div class="main-menu">
<nav class="navigation">
<ul class="nav menu">
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About Us</a></li>
<li><a href='programs.html'>Programs</a></li>
<li><a href="contact.html">Contact Us</a></li>
</ul>
</nav>
</div>
<!--/ End Main Menu -->
</div>
</div>
</div>
</div>
</div>
<!--/ End Header Inner -->
</header>
<!-- End Header Area -->

<!-- Breadcrumbs -->
<div class="breadcrumbs overlay">
<div class="container">
<div class="row">
<div class="col-12">
<div class="bread-inner">
<div class="row">
<div class="col-12">
<h2>Get Started</h2>
<ul class="bread-list">
<li><a href="index.html">Home</a></li>
<li><i class="icofont-simple-right"></i></li>
<li class="active">Get Started</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- End Breadcrumbs -->

<!-- Get Started Section -->
<section class="get-started section">
<div class="container">
<div class="row">
<div class="col-lg-12">
<div class="section-title">
<h2>Join JE TechHub Today</h2>
<img src="images/section-img.png" alt="#">
<p>Start your journey with us and unlock your potential in technology</p>
</div>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<!-- Authentication Container -->
<div id="authContainer" class="auth-container">
<!-- Auth Tabs -->
<div class="auth-tabs">
<button class="auth-tab active" onclick="showTab('signin')">Sign In</button>
<button class="auth-tab" onclick="showTab('signup')">Sign Up</button>
</div>

<!-- Sign In Form -->
<div id="signinForm" class="auth-form active">
<h3 style="margin-bottom: 30px; text-align: center; color: #333;">Welcome Back</h3>
<div id="signinMessage"></div>
<form id="signinFormElement">
<div class="form-group">
<label for="signinEmail">Email Address</label>
<input type="email" id="signinEmail" required>
</div>
<div class="form-group">
<label for="signinPassword">Password</label>
<input type="password" id="signinPassword" required>
</div>
<button type="submit" class="btn-auth" id="signinBtn">Sign In</button>
</form>
</div>

<!-- Sign Up Form -->
<div id="signupForm" class="auth-form">
<h3 style="margin-bottom: 30px; text-align: center; color: #333;">Create Account</h3>
<div id="signupMessage"></div>
<form id="signupFormElement">
<div class="row">
<div class="col-md-6">
<div class="form-group">
<label for="firstName">First Name</label>
<input type="text" id="firstName" required>
</div>
</div>
<div class="col-md-6">
<div class="form-group">
<label for="lastName">Last Name</label>
<input type="text" id="lastName" required>
</div>
</div>
</div>
<div class="form-group">
<label for="signupEmail">Email Address</label>
<input type="email" id="signupEmail" required>
</div>
<div class="form-group">
<label for="phone">Phone Number</label>
<input type="tel" id="phone" required>
</div>
<div class="form-group">
<label for="course">Course of Interest</label>
<select id="course" required>
<option value="">Select a course</option>
<option value="Web Development">Web Development</option>
<option value="UI/UX Design">UI/UX Design</option>
<option value="Data Analysis">Data Analysis</option>
<option value="Graphics Design">Graphics Design</option>
<option value="Video Editing">Video Editing</option>
<option value="Forex Trading">Forex Trading</option>
<option value="Phone Repair">Phone Repair</option>
</select>
</div>
<div class="form-group">
<label for="signupPassword">Password</label>
<input type="password" id="signupPassword" required minlength="6">
</div>
<div class="form-group">
<label for="confirmPassword">Confirm Password</label>
<input type="password" id="confirmPassword" required minlength="6">
</div>
<button type="submit" class="btn-auth" id="signupBtn">Create Account</button>
</form>
</div>
</div>

<!-- Enhanced Dashboard Container -->
<div id="dashboardContainer" class="dashboard-container" style="display: none;">
<div class="dashboard-header">
<h2>Welcome to Your Dashboard!</h2>
<p>Track your progress and explore new opportunities</p>
</div>

<div class="dashboard-content">
<!-- User Info Section -->
<div id="userInfo" class="user-info">
<div id="userAvatar" class="user-avatar">JD</div>
<div id="userDetails" style="text-align: center;">
<!-- User details will be populated here -->
</div>
</div>

<!-- Stats Section -->
<div class="stats-grid">
<div class="stat-card">
<div class="stat-number" id="coursesEnrolled">1</div>
<div class="stat-label">Courses Enrolled</div>
</div>
<div class="stat-card">
<div class="stat-number" id="hoursLearned">0</div>
<div class="stat-label">Hours Learned</div>
</div>
<div class="stat-card">
<div class="stat-number" id="certificatesEarned">0</div>
<div class="stat-label">Certificates</div>
</div>
<div class="stat-card">
<div class="stat-number" id="daysSinceJoined">0</div>
<div class="stat-label">Days with Us</div>
</div>
</div>

<!-- Dashboard Grid -->
<div class="dashboard-grid">
<!-- Course Progress Card -->
<div class="dashboard-card">
<div class="card-header">
<div class="card-icon">
<i class="fa fa-graduation-cap"></i>
</div>
<h3 class="card-title">Course Progress</h3>
</div>
<div class="card-content">
<div id="courseProgress">
<p><strong>Current Course:</strong> <span id="currentCourse">Not enrolled</span></p>
<div class="progress-bar">
<div class="progress-fill" id="progressFill" style="width: 0%"></div>
</div>
<p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
<span id="progressText">Get started by enrolling in a course</span>
</p>
</div>
</div>
</div>

<!-- Recent Activity Card -->
<div class="dashboard-card">
<div class="card-header">
<div class="card-icon">
<i class="fa fa-clock-o"></i>
</div>
<h3 class="card-title">Recent Activity</h3>
</div>
<div class="card-content">
<div id="recentActivity">
<div class="activity-item">
<div class="activity-icon">
<i class="fa fa-user-plus"></i>
</div>
<div class="activity-content">
<div class="activity-title">Account Created</div>
<div class="activity-time" id="joinedTime">Just now</div>
</div>
</div>
</div>
</div>
</div>

<!-- Learning Resources Card -->
<div class="dashboard-card">
<div class="card-header">
<div class="card-icon">
<i class="fa fa-book"></i>
</div>
<h3 class="card-title">Learning Resources</h3>
</div>
<div class="card-content">
<p>Access your course materials, assignments, and additional resources to enhance your learning experience.</p>
<div style="margin-top: 15px;">
<small style="color: #666;"><i class="fa fa-info-circle"></i> Resources will be available after course enrollment</small>
</div>
</div>
</div>

<!-- Support Card -->
<div class="dashboard-card">
<div class="card-header">
<div class="card-icon">
<i class="fa fa-life-ring"></i>
</div>
<h3 class="card-title">Support & Help</h3>
</div>
<div class="card-content">
<p>Need assistance? Our support team is here to help you succeed in your learning journey.</p>
<div style="margin-top: 15px;">
<small style="color: #666;"><i class="fa fa-envelope"></i> Contact us anytime for support</small>
</div>
</div>
</div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
<a href="programs.html" class="action-btn">
<i class="fa fa-search" style="margin-right: 8px;"></i>
Browse Courses
</a>
<a href="contact.html" class="action-btn">
<i class="fa fa-envelope" style="margin-right: 8px;"></i>
Contact Support
</a>
<a href="about.html" class="action-btn">
<i class="fa fa-info-circle" style="margin-right: 8px;"></i>
Learn More About Us
</a>
</div>

<button class="logout-btn" onclick="logout()">
<i class="fa fa-sign-out" style="margin-right: 8px;"></i>
Logout
</button>
</div>
</div>

</div>
</div>
</div>
</section>
<!-- End Get Started Section -->

<!-- Footer Area -->
<footer id="footer" class="footer ">
<!-- Footer Top -->
<div class="footer-top">
<div class="container">
<div class="row">
<div class="col-lg-3 col-md-6 col-12">
<div class="single-footer">
<h2>About Us</h2>
<p>JE TechHub is dedicated to providing quality technology education and empowering individuals with essential digital skills.</p>
<!-- Social -->
<ul class="social">
<li><a href="https://www.instagram.com/joe.express1?igsh=NXZjcnFoZWI1bWI0&utm_source=qr"><i class="icofont-instagram"></i></a></li>
<li><a href="#"><i class="icofont-google-plus"></i></a></li>
<li><a href="#"><i class="icofont-twitter"></i></a></li>
<li><a href="#"><i class="icofont-vimeo"></i></a></li>
<li><a href="#"><i class="icofont-pinterest"></i></a></li>
</ul>
<!-- End Social -->
</div>
</div>
<div class="col-lg-3 col-md-6 col-12">
<div class="single-footer f-link">
<h2>Quick Links</h2>
<div class="row">
<div class="col-lg-6 col-md-6 col-12">
<ul>
<li><a href="index.html"><i class="fa fa-caret-right" aria-hidden="true"></i>Home</a></li>
<li><a href="about.html"><i class="fa fa-caret-right" aria-hidden="true"></i>About Us</a></li>
<li><a href="programs.html"><i class="fa fa-caret-right" aria-hidden="true"></i>Services</a></li>
<li><a href="contact.html"><i class="fa fa-caret-right" aria-hidden="true"></i>Contact Us</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-lg-3 col-md-6 col-12">
<div class="single-footer">
<h2>Open Hours</h2>
<ul class="time-sidual">
<li class="day">Mondays - Fridays <span>8.00-20.00</span></li>
<li class="day">Saturdays <span>9.00-18.30</span></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<!--/ End Footer Top -->
<!-- Copyright -->
<div class="copyright">
<div class="container">
<div class="row">
<div class="col-lg-12 col-md-12 col-12">
<div class="copyright-content">
<p>Â© Copyright 2018 | All Rights Reserved</p>
</div>
</div>
</div>
</div>
</div>
<!--/ End Copyright -->
</footer>
<!--/ End Footer Area -->

<!-- Enhanced Authentication JavaScript -->
<script>
// Initialize Supabase
const supabaseUrl = 'https://icqzgoagqosthgipepdq.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImljcXpnb2FncW9zdGhnaXBlcGRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkwODI1NzAsImV4cCI6MjA2NDY1ODU3MH0.nzLqXrmUOmplR71fW-fumg58DiUOs_cKDqmjeuT8Yrg';

const supabase = window.supabase.createClient(supabaseUrl, supabaseKey, {
    auth: {
        storage: localStorage,
        persistSession: true,
        autoRefreshToken: true,
    }
});

// Global variables
let currentUser = null;
let currentSession = null;
let userProfile = null;

// Initialize app on page load
document.addEventListener('DOMContentLoaded', function() {
    initializeAuth();
    setupFormHandlers();
});

// Initialize authentication
async function initializeAuth() {
    // Set up auth state listener
    supabase.auth.onAuthStateChange((event, session) => {
        currentSession = session;
        currentUser = session?.user ?? null;
        
        if (currentUser) {
            showDashboard();
        } else {
            showAuthForms();
        }
    });

    // Check for existing session
    const { data: { session } } = await supabase.auth.getSession();
    currentSession = session;
    currentUser = session?.user ?? null;
    
    if (currentUser) {
        showDashboard();
    } else {
        showAuthForms();
    }
}

// Setup form handlers
function setupFormHandlers() {
    // Sign in form
    document.getElementById('signinFormElement').addEventListener('submit', handleSignIn);
    
    // Sign up form
    document.getElementById('signupFormElement').addEventListener('submit', handleSignUp);
}

// Handle sign in
async function handleSignIn(e) {
    e.preventDefault();
    
    const email = document.getElementById('signinEmail').value;
    const password = document.getElementById('signinPassword').value;
    const btn = document.getElementById('signinBtn');
    const messageDiv = document.getElementById('signinMessage');
    
    // Disable button and show loading
    btn.disabled = true;
    btn.textContent = 'Signing In...';
    messageDiv.innerHTML = '';
    
    try {
        const { data, error } = await supabase.auth.signInWithPassword({
            email: email,
            password: password
        });
        
        if (error) throw error;
        
        // Success - auth state change will handle the redirect
        showMessage('signinMessage', 'Sign in successful! Redirecting...', 'success');
        
    } catch (error) {
        console.error('Sign in error:', error);
        showMessage('signinMessage', error.message, 'error');
    } finally {
        btn.disabled = false;
        btn.textContent = 'Sign In';
    }
}

// Handle sign up
async function handleSignUp(e) {
    e.preventDefault();
    
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const email = document.getElementById('signupEmail').value;
    const phone = document.getElementById('phone').value;
    const course = document.getElementById('course').value;
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const btn = document.getElementById('signupBtn');
    const messageDiv = document.getElementById('signupMessage');
    
    // Validate passwords match
    if (password !== confirmPassword) {
        showMessage('signupMessage', 'Passwords do not match!', 'error');
        return;
    }
    
    // Disable button and show loading
    btn.disabled = true;
    btn.textContent = 'Creating Account...';
    messageDiv.innerHTML = '';
    
    try {
        const { data, error } = await supabase.auth.signUp({
            email: email,
            password: password,
            options: {
                data: {
                    first_name: firstName,
                    last_name: lastName,
                    full_name: `${firstName} ${lastName}`,
                    phone: phone,
                    course: course
                },
                emailRedirectTo: `${window.location.origin}/getStarted.html`
            }
        });
        
        if (error) throw error;
        
        if (data.user && !data.session) {
            showMessage('signupMessage', 'Please check your email for verification link!', 'success');
        } else if (data.session) {
            showMessage('signupMessage', 'Account created successfully! Redirecting...', 'success');
        }
        
    } catch (error) {
        console.error('Sign up error:', error);
        showMessage('signupMessage', error.message, 'error');
    } finally {
        btn.disabled = false;
        btn.textContent = 'Create Account';
    }
}

// Show message
function showMessage(containerId, message, type) {
    const container = document.getElementById(containerId);
    const className = type === 'error' ? 'error-message' : 'success-message';
    container.innerHTML = `<div class="${className}">${message}</div>`;
}

// Show tab
function showTab(tab) {
    // Update tab buttons
    document.querySelectorAll('.auth-tab').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');
    
    // Update forms
    document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
    document.getElementById(tab + 'Form').classList.add('active');
    
    // Clear messages
    document.getElementById('signinMessage').innerHTML = '';
    document.getElementById('signupMessage').innerHTML = '';
}

// Enhanced dashboard display with animations and data
async function showDashboard() {
    document.getElementById('authContainer').style.display = 'none';
    document.getElementById('dashboardContainer').style.display = 'block';
    
    // Load user profile and populate dashboard
    if (currentUser) {
        try {
            const { data: profile, error } = await supabase
                .from('profiles')
                .select('*')
                .eq('id', currentUser.id)
                .single();
            
            if (error) throw error;
            
            userProfile = profile;
            populateDashboard(profile);
            
        } catch (error) {
            console.error('Error loading profile:', error);
            populateDashboard({
                full_name: 'User',
                email: currentUser.email,
                created_at: currentUser.created_at
            });
        }
    }
}

// Populate dashboard with user data and animations
function populateDashboard(profile) {
    // Update user avatar
    const initials = getInitials(profile.full_name || profile.email);
    document.getElementById('userAvatar').textContent = initials;
    
    // Update user details
    document.getElementById('userDetails').innerHTML = `
        <h4 style="margin: 0 0 10px 0; color: #333;">${profile.full_name || 'Welcome!'}</h4>
        <p style="margin: 0 0 5px 0;"><strong>Email:</strong> ${profile.email || currentUser.email}</p>
        ${profile.phone ? `<p style="margin: 0 0 5px 0;"><strong>Phone:</strong> ${profile.phone}</p>` : ''}
        ${profile.course ? `<p style="margin: 0 0 5px 0;"><strong>Course:</strong> ${profile.course}</p>` : ''}
        <p style="margin: 0; color: #666;"><strong>Joined:</strong> ${new Date(profile.created_at).toLocaleDateString()}</p>
    `;
    
    // Update course progress
    if (profile.course) {
        document.getElementById('currentCourse').textContent = profile.course;
        document.getElementById('coursesEnrolled').textContent = '1';
        
        // Simulate progress
        const progress = Math.floor(Math.random() * 30) + 10; // 10-40% progress
        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('progressText').textContent = `${progress}% completed - Keep going!`;
    }
    
    // Calculate days since joined
    const joinedDate = new Date(profile.created_at);
    const today = new Date();
    const daysSinceJoined = Math.floor((today - joinedDate) / (1000 * 60 * 60 * 24));
    document.getElementById('daysSinceJoined').textContent = daysSinceJoined;
    
    // Update join time in activity
    document.getElementById('joinedTime').textContent = getTimeAgo(joinedDate);
    
    // Animate stats counters
    animateCounters();
    
    // Add course-specific activity if enrolled
    if (profile.course) {
        addCourseActivity(profile.course);
    }
}

// Get initials from name
function getInitials(name) {
    if (!name) return 'U';
    const names = name.split(' ');
    return names.map(n => n.charAt(0).toUpperCase()).join('').substring(0, 2);
}

// Get time ago text
function getTimeAgo(date) {
    const now = new Date();
    const diff = now - date;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    
    if (days === 0) return 'Today';
    if (days === 1) return 'Yesterday';
    return `${days} days ago`;
}

// Animate counter numbers
function animateCounters() {
    const counters = ['coursesEnrolled', 'hoursLearned', 'certificatesEarned', 'daysSinceJoined'];
    
    counters.forEach(counterId => {
        const element = document.getElementById(counterId);
        const finalValue = parseInt(element.textContent);
        let currentValue = 0;
        const increment = Math.ceil(finalValue / 20);
        
        const timer = setInterval(() => {
            currentValue += increment;
            if (currentValue >= finalValue) {
                currentValue = finalValue;
                clearInterval(timer);
            }
            element.textContent = currentValue;
        }, 50);
    });
}

// Add course-specific activity
function addCourseActivity(course) {
    const activityContainer = document.getElementById('recentActivity');
    const courseActivity = `
        <div class="activity-item">
            <div class="activity-icon">
                <i class="fa fa-graduation-cap"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">Enrolled in ${course}</div>
                <div class="activity-time">${getTimeAgo(new Date(userProfile.created_at))}</div>
            </div>
        </div>
    `;
    activityContainer.innerHTML += courseActivity;
}

// Show auth forms
function showAuthForms() {
    document.getElementById('authContainer').style.display = 'block';
    document.getElementById('dashboardContainer').style.display = 'none';
}

// Logout
async function logout() {
    try {
        const { error } = await supabase.auth.signOut();
        if (error) throw error;
        
        // Reset variables
        currentUser = null;
        currentSession = null;
        userProfile = null;
        
        // Auth state change will handle showing the forms
    } catch (error) {
        console.error('Logout error:', error);
        alert('Error logging out. Please try again.');
    }
}
</script>

<!-- jquery Min JS -->
<script src="js/jquery.min.js"></script>
<!-- jquery Migrate JS -->
<script src="js/jquery-migrate-3.0.0.js"></script>
<!-- jquery Ui JS -->
<script src="js/jquery-ui.min.js"></script>
<!-- Easing JS -->
<script src="js/easing.js"></script>
<!-- Color JS -->
<script src="js/colors.js"></script>
<!-- Popper JS -->
<script src="js/popper.min.js"></script>
<!-- Bootstrap Datepicker JS -->
<script src="js/bootstrap-datepicker.js"></script>
<!-- Jquery Nav JS -->
<script src="js/jquery.nav.js"></script>
<!-- Slicknav JS -->
<script src="js/slicknav.min.js"></script>
<!-- ScrollUp JS -->
<script src="js/jquery.scrollUp.min.js"></script>
<!-- Niceselect JS -->
<script src="js/niceselect.js"></script>
<!-- Tilt Jquery JS -->
<script src="js/tilt.jquery.min.js"></script>
<!-- Owl Carousel JS -->
<script src="js/owl-carousel.js"></script>
<!-- counterup JS -->
<script src="js/jquery.counterup.min.js"></script>
<!-- Steller JS -->
<script src="js/steller.js"></script>
<!-- Wow JS -->
<script src="js/wow.min.js"></script>
<!-- Magnific Popup JS -->
<script src="js/jquery.magnific-popup.min.js"></script>
<!-- Counter Up CDN JS -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
<!-- Bootstrap JS -->
<script src="js/bootstrap.min.js"></script>
<!-- Main JS -->
<script src="js/main.js"></script>
</body>
</html>
